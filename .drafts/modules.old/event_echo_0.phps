<?php defined('CORENINPAGE') or die('Hack!');
//todo: 1. сделать вывод шаблоном,а не строкой

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class event_echo_0 extends module
{

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

protected $events;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function __construct ($configs)
{
	parent::__construct($configs);

	$this->events = array();
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function core_event ($args)
{
	$this->events[] = $args;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

public function core_stop ($args)
{
	foreach ($this->events as $event)
	{
		$executor   = isset($event['executor'  ]) ? $event['executor'  ] : null;
		$module     = isset($event['module'    ]) ? $event['module'    ] : null;
		$method     = isset($event['method'    ]) ? $event['method'    ] : null;
		$identifier = isset($event['identifier']) ? $event['identifier'] : null;
		$message    = isset($event['message'   ]) ? $event['message'   ] : null;
		$data       = isset($event['data'      ]) ? $event['data'      ] : null;

		echo("Event '{$identifier}' in {$module}({$executor})::{$method}(): {$message}.<br>\n");
	}
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
}

?>